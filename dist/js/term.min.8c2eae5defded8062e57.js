(()=>{"use strict";let e=(e,t=500,o=0)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=`${e.offsetHeight}px`,e.offsetHeight,e.style.overflow="hidden",e.style.height=o?`${o}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!o,!o&&e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),!o&&e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:e}}))}),t))};const t=[{adress:"Кошиця",category:"Свій маркет",foodDates:["Львівське світле жб, 2024-10-10"]},{adress:"Малоголосківська",category:"Свій маркет",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Малоголосківська 16",category:"Близенько",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Малоголосківська 12",category:"Близенько",foodDates:["Львівське світле жб, 2024-10-10"]},{adress:"Чорновола 69",category:"Близенько",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Чорновола 101",category:"Близенько",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Підголоско",category:"Близенько",foodDates:["Львівське світле жб, 2024-10-10"]},{adress:"Малоголосківська",category:"АТБ",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Замарстинівська",category:"АТБ",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Чорновола",category:"Арсен",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Чорновола",category:"Рукавичка",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Панча",category:"Рукавичка",foodDates:["Львівське світле жб, 2024-10-10"]},{adress:"Варшавська",category:"Рукавичка",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Малоголосківська",category:"Рукавичка",foodDates:["Львівське 1715 жб, 2024-10-10"]},{adress:"Малоголосківська",category:"Сімі",foodDates:["Львівське 1715 жб, 2024-10-10"]}];function o(e){e.closest("[data-food-info-adress]").remove()}!function(){const e=document.querySelector("[data-date-container]"),o=new Date;let a=!0;t.forEach(((t,s)=>{a=!0,t.foodDates.forEach(((n,r)=>{const[i,d]=n.split(", "),l=d.split("-"),p=new Date(l[0],l[1]-1,l[2]),c=Math.ceil((p-o)/864e5);c<=14&&((t,o,s,n,r,i)=>{const d={"Свій маркет":"shop_sviumarket",Близенько:"shop_blizenko",Рукавичка:"shop_rukavichka",АТБ:"shop_atb",Сімі:"shop_simi",Арсен:"shop_arsen"}[s]||"";a?(e.insertAdjacentHTML("beforeend",`\n                <div data-spollers data-storage-index="${r}" class="shop ${d}">\n                    <h2 data-spoller class="shop__title _icon-angle-right">${n}</h2>\n                    <div class="shop__items">\n                        <div data-food-index="${i}" class="shop__item">\n                            <p data-date="name" class="shop__product">${t} :</p> \n                            <p data-date="days" class="shop__days"><span class="shop__span">${o}</span> днів</p>\n                            <button data-date-btn="info" class="shop__btn-info">i</button>  \n                        </div>\n                    </div>\n                </div>`),a=!1):document.querySelector(`[data-date-adress="${r}"]`).querySelector(".shop__items").insertAdjacentHTML("afterend",` <div data-food-index="${i}" class="shop__item">\n                            <p data-date="name" class="shop__product">${t} :</p> \n                            <p data-date="days" class="shop__days"><span class="shop__span">${o}</span> днів</p>\n                            <button data-date-btn="info" class="shop__btn-info">i</button>  \n                        </div>`)})(i,c,t.category,t.adress,s,r)}))}))}(),function(){const t=document.querySelectorAll("[data-spollers]");if(t.length>0){const o=Array.from(t).filter((function(e,t,o){return!e.dataset.spollers.split(",")[0]}));o.length&&s(o);let a=function(e,t){const o=Array.from(e).filter((function(e,o,a){if(e.dataset[t])return e.dataset[t].split(",")[0]}));if(o.length){const e=[];o.forEach((o=>{const a={},s=o.dataset[t].split(",");a.value=s[0],a.type=s[1]?s[1].trim():"max",a.item=o,e.push(a)}));let a=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));a=function(e){return e.filter((function(e,t,o){return o.indexOf(e)===t}))}(a);const s=[];if(a.length)return a.forEach((t=>{const o=t.split(","),a=o[1],n=o[2],r=window.matchMedia(o[0]),i=e.filter((function(e){if(e.value===a&&e.type===n)return!0}));s.push({itemsArray:i,matchMedia:r})})),s}}(t,"spollers");function s(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_spoller-init"),n(e),e.addEventListener("click",r)):(e.classList.remove("_spoller-init"),n(e,!1),e.removeEventListener("click",r))}))}function n(e,t=!0){let o=e.querySelectorAll("[data-spoller]");o.length&&(o=Array.from(o).filter((t=>t.closest("[data-spollers]")===e)),o.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_spoller-active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)})))}function r(t){const o=t.target;if(o.closest("[data-spoller]")){const a=o.closest("[data-spoller]"),s=a.closest("[data-spollers]"),n=s.hasAttribute("data-one-spoller"),r=s.dataset.spollersSpeed?parseInt(s.dataset.spollersSpeed):500;s.querySelectorAll("._slide").length||(n&&!a.classList.contains("_spoller-active")&&i(s),a.classList.toggle("_spoller-active"),((t,o=500)=>{t.hidden?((e,t=500,o=0)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden=!e.hidden&&null,o&&e.style.removeProperty("height");let a=e.offsetHeight;e.style.overflow="hidden",e.style.height=o?`${o}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=a+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:e}}))}),t)}})(t,o):e(t,o)})(a.nextElementSibling,r)),t.preventDefault()}}function i(t){const o=t.querySelector("[data-spoller]._spoller-active"),a=t.dataset.spollersSpeed?parseInt(t.dataset.spollersSpeed):500;o&&!t.querySelectorAll("._slide").length&&(o.classList.remove("_spoller-active"),e(o.nextElementSibling,a))}a&&a.length&&a.forEach((e=>{e.matchMedia.addEventListener("change",(function(){s(e.itemsArray,e.matchMedia)})),s(e.itemsArray,e.matchMedia)}));const d=document.querySelectorAll("[data-spoller-close]");d.length&&document.addEventListener("click",(function(t){t.target.closest("[data-spollers]")||d.forEach((t=>{const o=t.closest("[data-spollers]"),a=o.dataset.spollersSpeed?parseInt(o.dataset.spollersSpeed):500;t.classList.remove("_spoller-active"),e(t.nextElementSibling,a)}))}))}}(),document.addEventListener("click",(function(e){const a=e.target;a.closest("[data-date-btn]")&&function(e){const a=e.closest("[data-date-btn]").getAttribute("data-date-btn");switch(a){case"info":!function(e){const o=e.closest("[data-storage-index]"),a=o.dataset.storageIndex,s=o.querySelector("[data-food-index]").dataset.foodIndex,[n,r]=t[a].foodDates[s].split(", ");document.body.insertAdjacentHTML("beforeend",`\n        <div data-food-info-adress="${a},${s}" class="info">\n            <div class="info__wrapper">\n                <div class="info__btns">\n                    <button data-date-btn="save-info" class="info__btn info__btn_save"></button>\n                    <button data-date-btn="remove-info" class="info__btn info__btn_remove"></button>\n                </div>\n                <div class="info__name">Мережа: <span class="info__span">${t[a].category}</span></div>\n                <div class="info__address">Адреса: <span class="info__span">${t[a].adress}</span></div>\n                <div class="info__label">\n                   <input data-food-info="date" class="info__input" type="date" value="${r}"> \n                </div>\n            </div>\n        </div>`)}(e);break;case"remove-info":o(e);break;case"save-info":!function(e){const a=e.closest("[data-food-info-adress]"),[s,n]=a.dataset.foodInfoAdress.split(","),r=a.querySelector('[data-food-info="date"]').value;console.log(s,n,r);const i=t[s].foodDates[n].split(", ")[0];t[s].foodDates[n]=`${i}, ${r}`,o(e)}(e);break;case"create-new-date":document.body.insertAdjacentHTML("beforeend",'\n         <div class="new-date">\n            <div class="new-date__wrapper">\n                 <h1 class="new-date__title">Нова дата</h1>\n                <p class="new-date__text">Оберіть дату</p>\n                <select data-new-date="selector" class="new-date__select">\n                    <optgroup label="Свій маркет">\n                        <option value="1">Малоголосківська</option>\n                        <option value="0">Кошиця</option>\n                    </optgroup>\n                    <optgroup label="Близеько">\n                        <option value="2">Малоголосківська 16</option>\n                        <option value="3">Малоголосківська 12</option>\n                        <option value="5">Чорновола 101</option>\n                        <option value="4">Чорновола 69</option>\n                        <option value="6">Підголоско</option>\n                    </optgroup>\n                    <optgroup label="Рукавичка">\n                        <option value="13">Малоголосківська</option>\n                        <option value="12">Варшавська</option>\n                        <option value="11">Панча</option>\n                        <option value="10">Чорновола</option>\n                    </optgroup>\n                    <optgroup label="АТБ">\n                        <option value="8">Замарстинівська</option>\n                        <option value="7">Малоголосківська</option>\n                    </optgroup>\n                    <optgroup label="Арсен">\n                        <option value="9">Чорновола</option>\n                    </optgroup>\n                    <optgroup label="Сімі">\n                        <option value="14">Малоголосківська</option>\n                    </optgroup>\n                </select>\n                <p class="new-date__text">Вкажіть назву</p>\n                <input data-new-date="name" type="text" class="new-date__input">\n                <p class="new-date__text">Вкажіть нову дату</p>\n                <input data-new-date="date" type="date" class="new-date__input">\n                <div class="new-date__btns">\n                    <button data-date-btn="save-new-date" class="new-date__btn-save">Зберегти</button>\n                    <button data-date-btn="remove-new-date" class="new-date__btn-remove">Закрити</button>\n                </div>\n            </div>\n        </div>\n        ');break;case"remove-new-date":!function(e){e.closest(".new-date").remove()}(e);break;case"save-new-date":!function(e){const o=e.closest(".new-date"),a=o.querySelector('[data-new-date="selector"]').value,s=o.querySelector('[data-new-date="name"]'),n=o.querySelector('[data-new-date="name"]').value.trim(),r=o.querySelector('[data-new-date="date"]').value;if(!s)return void alert("Введіть назву");if(!r)return void alert("Введіть дату");const i=`${n}, ${r}`;t[Number(a)].foodDates.push(i),s.value=""}(e);break;default:console.log(a+" не знайдено")}}(a)}))})();