(()=>{"use strict";const t={shops:[{marketName:"Свій маркет",marketList:[{shopName:"кошиця",foodList:[{foodName:"Львівське світле",foodDate:"20.01.2000"}]}]},{marketName:"Близенько",marketList:[]},{marketName:"Сімі",marketList:[]},{marketName:"АТБ",marketList:[]},{marketName:"Рукавичка",marketList:[]},{marketName:"Арсен",marketList:[]}],food:[{foodTypeName:"Львівське світле",foodList:["Львівське світле жб","Львівське світле скло"]}]},e={createFoodForm:'\n       <div data-term-body="saveNewFood" class="form">\n            <div class="form__content">\n                <button data-term-btn="removeForm" class="form__btn-remove"></button>\n                <h4 class="form__title">Продукти</h4>\n                <h5 class="form__subtitle"><span class="form__important">*</span>Вкажіть категорію продукції</h5>\n                <div class="select">\n                    <h6 class="select__title">Виберіть категорію продуктів:</h6>\n                    <select data-term-select="type-list" class="select__native">\n                    <option value="0">- ---- -</option>\n                    </select>\n                </div>  \n                <p class="form__text">...або добавте свою</з>\n                <div  class="input">\n                    <input data-term-input="new-type" id="food-category" class="input__field" type="text" autocomplete="off">\n                    <label for="food-category" class="input__label">Категорія продукції</label>\n                </div>\n                <h5 class="form__subtitle"><span class="form__important">*</span>Вкажіть назву продукції</h5>\n                <div class="input">\n                    <input data-term-input="new-food" id="food-name" class="input__field" type="text" autocomplete="off">\n                    <label for="food-name" class="input__label">Продукт</label>\n                </div>\n                <div class="form__btns">\n                    <button data-term-btn="saveForm" class="form__btn-confirm">Добавити</button>\n                    <button data-term-btn="clearForm" class="form__btn-reset">Очистити</button>\n                </div>\n            </div>\n        </div>',createShopForm:'\n        <div data-term-body="saveNewShop" class="form">\n            <div class="form__content">\n                <button data-term-btn="removeForm" class="form__btn-remove"></button>\n                <h4 class="form__title">Магазин</h4>\n                <h5 class="form__subtitle"><span class="form__important">*</span>Вкажіть мережу магазина</h5>\n                <div class="select">\n                    <h6 class="select__title">Виберіть мережу:</h6>\n                    <select data-term-select="market-list" class="select__native">\n                        <option value="0">- ---- -</option>\n                        <option value="1">Свій маркет</option>\n                        <option value="2">Близенько</option>\n                        <option value="3">Сімі</option>\n                        <option value="4">Рукавичка</option>\n                        <option value="4">АТБ</option>\n                        <option value="4">Арсен</option>\n                    </select>\n                </div>  \n                <h5 class="form__subtitle"><span class="form__important">*</span>Вкажіть назву магазина</h5>\n                <div class="input">\n                    <input data-term-input="new-shop" id="shop-name" class="input__field" type="text" autocomplete="off">\n                    <label for="shop-name" class="input__label">Магазин</label>\n                </div>\n                <div class="form__btns">\n                    <button data-term-btn="saveForm" class="form__btn-confirm">Добавити</button>\n                    <button data-term-btn="clearForm" class="form__btn-reset">Очистити</button>\n                </div>\n            </div>\n        </div>',createDateForm:'\n        <div data-term-body="saveNewDate" class="form">\n            <div class="form__content">\n                <button data-term-btn="removeForm" class="form__btn-remove"></button>\n                <h4 class="form__title">Дата продукта</h4>\n                <h5 class="form__subtitle"><span class="form__important">*</span>Вкажіть назву магазина</h5>\n                <div class="select">\n                    <h6 class="select__title">Виберіть магазин:</h6>\n                    <select data-term-select="shop-list" class="select__native">\n                        <option value="0">- ---- -</option>\n                    </select>\n                </div>    \n                <h5 class="form__subtitle"><span class="form__important">*</span>Вкажіть назву продукції</h5>                                                           \n                <div class="select">\n                    <h6 class="select__title">Виберіть продукт:</h6>\n                    <select data-term-select="food-list" class="select__native">\n                        <option value="0">- ---- -</option>\n                    </select>\n                </div>  \n                <h5 class="form__subtitle"><span class="form__important">*</span>Вкажіть кінцеву дату</h5>       \n                <div class="input input_date">\n                    <input data-term-date="new-date" id="deadline-food" class="input__field" type="date">\n                    <label for="deadline-food" class="input__label">Дата</label>\n                </div>\n                <div class="form__btns">\n                    <button data-term-btn="saveForm" class="form__btn-confirm">Добавити</button>\n                    <button data-term-btn="clearForm" class="form__btn-reset">Очистити</button>\n                </div>      \n            </div>\n        </div>\n        '};function o(o,a){document.body.insertAdjacentHTML("beforeend",e[a]),document.querySelectorAll("[data-term-input]").forEach((t=>{t.addEventListener("focus",(()=>{t.classList.add("active")})),t.addEventListener("blur",(()=>{""===t.value.trim()&&t.classList.remove("active")}))})),function(){const e=document.querySelector('[data-term-select="type-list"]'),o=document.querySelector('[data-term-select="food-list"]'),a=document.querySelector('[data-term-select="shop-list"]');if(e)for(let o=0;o<t.food.length;o++)e.insertAdjacentHTML("beforeend",`<option value="${o+1}">${t.food[o].foodTypeName}</option>`);if(o)for(let e=0;e<t.food.length;e++){let a="";for(let o=0;o<t.food[e].foodList.length;o++)a+=`<option value="${o+1}">${t.food[e].foodList[o]}</option>`;o.insertAdjacentHTML("beforeend",`<optgroup label="${t.food[e].foodTypeName}">${a}</outgroup>`)}if(a)for(let e=0;e<t.shops.length;e++){let o="";for(let a=0;a<t.shops[e].marketList.length;a++)o+=`<option value="${a+1}">${t.shops[e].marketList[a].shopName}</option>`;a.insertAdjacentHTML("beforeend",`<optgroup label="${t.shops[e].marketName}">${o}</outgroup>`)}}()}function a(t,e){t.closest("[data-term-body]").remove()}function n(t,e){const o=t.closest("[data-term-body]"),a=o.querySelectorAll("[data-term-select]"),n=o.querySelectorAll("[data-term-input]");if(a.length)for(let t=0;t<a.length;t++)a[t].options[0].selected=!0;if(n.length)for(let t=0;t<a.length;t++)n[t].value="",n[t].classList.remove("active")}function s(t,e,o){t.insertAdjacentHTML("beforeend",`<li class="term__item">Додано продукт ${e} до ${o}</li>`)}function l(e,o){switch(e.closest("[data-term-body]").getAttribute("data-term-body")){case"saveNewFood":!function(e){const o=e.closest("[data-term-body]"),a=o.querySelector('[data-term-select="type-list"]'),l=o.querySelector('[data-term-input="new-type"]'),r=o.querySelector('[data-term-input="new-food"]'),i=l.value.trim(),c=r.value.trim(),d=document.querySelector("[data-term-change]");c?i||"0"!==a.value?("0"===a.value?function(e,o,a){const n=t.food.find((t=>t.foodTypeName===e));n?n.foodList.push(o):t.food.push({foodTypeName:e,foodList:[o]}),s(a,o,e)}(i,c,d):function(e,o,a,n){const l=e||o.options[o.selectedIndex].innerHTML,r=t.food.find((t=>t.foodTypeName===l));r&&(r.foodList.push(a),s(n,a,l))}(i,a,c,d),n(e)):alert("Введіть категорію продукта, або вкажіть нову категорію"):alert("Введіть назву продукта")}(e);break;case"saveNewDate":!function(e){const o=e.closest("[data-term-body]"),a=o.querySelector('[data-term-select="shop-list"]'),n=o.querySelector('[data-term-select="food-list"]');o.querySelector('[data-term-date="new-date"]').value?"0"!==n?"0"!==a?(!function(e){for(const o of t.shops)for(const t of o.marketList)if(t.shopName.toLowerCase()===e.toLowerCase())return t}(a.value),alert("Магазин знайдено"),console.log(t)):alert("Ведіть магазин"):alert("Ведіть продукцію"):alert("Ведіть дату продукції")}(e);break;case"saveNewShop":!function(e){const o=e.closest("[data-term-body]"),a=o.querySelector('[data-term-select="market-list"]'),s=o.querySelector('[data-term-input="new-shop"]').value.trim(" ");s?"0"!==a.value?function(e,o,a){const s=t.shops.find((t=>t.marketName===e)),l=document.querySelector("[data-term-change]");s&&(function(t,e){return!t.some((t=>t.shopName===e))}(s.marketList,o)?(s.marketList.push({shopName:o,foodList:[]}),l.insertAdjacentHTML("beforeend",`<li class="term__item">Додано магазин ${o} до ${e}</li>`),n(a),console.log(t)):alert(`Даний магазин вже існує в категорії ${e}`))}(a.options[a.selectedIndex].innerHTML,s,e):alert("Вкажіть мережу магазина"):alert("Вкажіть назву магазина")}(e)}}document.addEventListener("click",(function(t){const e=t.target,s={saveForm:l,clearForm:n,createFoodForm:o,createDateForm:o,createShopForm:o,removeForm:a};if(e.closest(".header__btn")&&document.documentElement.classList.toggle("menu-active"),e.closest("[data-term-btn]")){const t=e.closest("[data-term-btn]").getAttribute("data-term-btn");s[t]?s[t](e,t):console.log(`Value '${t}' not find.`)}}))})();